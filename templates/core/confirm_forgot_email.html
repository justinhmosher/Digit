{% load static %}
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sign Up Success â€” Dine N Dash</title>

  <!-- Tailwind CDN (same look & feel as other pages) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            brand: { DEFAULT: "#0f172a" },  /* slate-900 */
            accent: { DEFAULT: "#10b981" } /* emerald-500 */
          },
          borderRadius: { '2xl': '1rem' }
        }
      }
    }
  </script>
</head>
<body class="bg-gradient-to-b from-white to-slate-50 text-slate-900 antialiased">

  <!-- Modal Backdrop -->
  <div id="backdrop" class="fixed inset-0 z-40 bg-black/50"></div>

  <!-- Modal Dialog -->
  <div id="signupSuccessModal"
       class="fixed inset-0 z-50 flex items-center justify-center p-4"
       role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div class="w-full max-w-xl rounded-2xl bg-white shadow-2xl border border-slate-200">
      <!-- Header -->
      <div class="border-b border-slate-200 px-6 py-5">
        <h2 id="modal-title" class="text-lg md:text-xl font-semibold">
          Please check your EMAIL AND JUNK MAIL to confirm your account.
        </h2>
        <p class="mt-2 text-sm text-slate-600 break-all">Email: <span class="font-medium text-slate-900">{{ email }}</span></p>
      </div>

      <!-- Body -->
      <div class="px-6 py-6">
        <form action="{% url 'core:confirm_forgot_email' email=email %}" method="post" class="space-y-4">
          {% csrf_token %}
          <button id="resendEmail" type="submit"
                  class="w-full h-12 rounded-2xl bg-brand text-white font-medium hover:bg-brand/90 disabled:opacity-50 disabled:cursor-not-allowed">
            Resend Email
          </button>
          <p id="timer" class="text-center text-sm text-slate-600">Please wait 30 seconds before resending.</p>
        </form>
      </div>

      <!-- Footer (optional placeholder) -->
      <div class="px-6 pb-6"></div>
    </div>
  </div>

  <script>
    // Open modal immediately (backdrop + dialog are already visible).
    // Prevent closing via backdrop click (keep it 'static').
    const backdrop = document.getElementById('backdrop');
    const modal = document.getElementById('signupSuccessModal');
    const resendBtn = document.getElementById('resendEmail');
    const timerEl = document.getElementById('timer');

    // Disable backdrop clicks
    backdrop.addEventListener('click', (e) => {
      e.stopPropagation();
      // do nothing (static backdrop)
    });

    // Disable ESC closing (static) by trapping keydown
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        e.preventDefault();
      }
    });

    // 30-second countdown for resend
    let remaining = 30;
    resendBtn.disabled = true;
    timerEl.textContent = `Please wait ${remaining} seconds before resending.`;

    const interval = setInterval(() => {
      remaining -= 1;
      if (remaining > 0) {
        timerEl.textContent = `Please wait ${remaining} seconds before resending.`;
      } else {
        clearInterval(interval);
        resendBtn.disabled = false;
        timerEl.textContent = '';
      }
    }, 1000);

    // Focus the button for accessibility once layout is ready
    window.requestAnimationFrame(() => resendBtn.focus());
  </script>
</body>
</html>
 